BX.namespace("BX.Sale.PersonalOrderComponent");(function(){BX.Sale.PersonalOrderComponent.PersonalOrderList={init:function(c){var d=document.getElementsByClassName("sale-order-list-inner-row");c.paymentList=c.paymentList||{};c.url=c.url||"";c.templateName=c.templateName||"";c.returnUrl=c.returnUrl||"";Array.prototype.forEach.call(d,function(a){var b=a.getElementsByClassName("sale-order-list-shipment-id");if(b[0]){Array.prototype.forEach.call(b,function(h){var g=h.parentNode.getElementsByClassName("sale-order-list-shipment-id-icon")[0];if(g){BX.clipboard.bindCopyClick(g,{text:h.innerHTML})}})}BX.bindDelegate(a,"click",{"class":"ajax_reload"},BX.proxy(function(j){var i=a.getElementsByClassName("sale-order-list-inner-row-body")[0];var k=a.getElementsByClassName("sale-order-list-inner-row-template")[0];var l=k.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:j.target.href,data:{sessid:BX.bitrix_sessid(),RETURN_URL:c.returnUrl},onsuccess:BX.proxy(function(f){var e=document.createElement("div");e.innerHTML=f;k.insertBefore(e,l);i.style.display="none";k.style.display="block";BX.bind(l,"click",function(){i.style.display="block";k.style.display="none";e.remove()},this)},this),onfailure:BX.proxy(function(){return this},this)},this);j.preventDefault()},this));BX.bindDelegate(a,"click",{"class":"sale-order-list-change-payment"},BX.proxy(function(j){j.preventDefault();var i=a.getElementsByClassName("sale-order-list-inner-row-body")[0];var k=a.getElementsByClassName("sale-order-list-inner-row-template")[0];var l=k.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:c.url,data:{sessid:BX.bitrix_sessid(),orderData:c.paymentList[j.target.id],templateName:c.templateName},onsuccess:BX.proxy(function(f){var e=document.createElement("div");e.innerHTML=f;k.insertBefore(e,l);j.target.style.display="none";i.parentNode.removeChild(i);k.style.display="block";BX.bind(l,"click",function(){window.location.reload()},this)},this),onfailure:BX.proxy(function(){return this},this)},this)},this))})}}})();